{% extends "base.html" %}
{% load static %}
{% load form_tags %}

{% block content %}
 <!-- Main -->
    <div class="md:flex mx-5 mb-8 md:mx-0">
      <!-- Suggested restaurant section -->
      <main
        class="mt-10 w-full md:flex md:gap-x-10 md:ml-10 lg:ml-36 lg:mr-32 md:mr-10 md:mx-0"
      >
        <!-- Billing Adress -->
        <div class="lg:w-[50%] md:w-[60%] mb-5">
          <!-- first items -->
          <div>
            <div
              class="bg-[#fff] flex gap-x-1 items-center w-52 justify-center rounded-tl-lg font-bold text-red-500 text-center px-1 py-2"
            >
              <div>
                <svg
                  class="w-5 h-5 text-red-500"
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="currentColor"
                >
                  <path
                    d="M2.25 2.25a.75.75 0 0 0 0 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 0 0-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 0 0 0-1.5H5.378A2.25 2.25 0 0 1 7.5 15h11.218a.75.75 0 0 0 .674-.421 60.358 60.358 0 0 0 2.96-7.228.75.75 0 0 0-.525-.965A60.864 60.864 0 0 0 5.68 4.509l-.232-.867A1.875 1.875 0 0 0 3.636 2.25H2.25ZM3.75 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z"
                  />
                </svg>
              </div>
              <div>
                <p>Billing Address</p>
              </div>
            </div>
            <div class="w-full" style="background-color: #fff">
              <div class="  flex justify-center items-center">
                <form action="{% url 'order_place' %}" method="POST" class="px-4 pt-5 max-w-3xl w-full bg-slate-300 bg-opacity-50 md:bg-white">
      {% csrf_token %}
      <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-5 px-5">
        <div>
          <label for="first-name">First Name :</label>
          {{ form.first_name|add_class:"px-5 form-control border rounded-lg py-2 px-3 w-full text-gray-700 leading-tight focus:outline-none focus:shadow-outline" }}
        </div>
        <div>
          <label for="last-name">Last Name :</label>
          {{ form.last_name|add_class:"px-5 form-control border rounded-lg py-2 px-3 w-full text-gray-700 leading-tight focus:outline-none focus:shadow-outline" }}
        </div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-5 px-5">
        <div>
          <label for="email-address">Email Address :</label>
          {{ form.email|add_class:"px-5 form-control border rounded-lg py-2 px-3 w-full text-gray-700 leading-tight focus:outline-none focus:shadow-outline" }}
        </div>
        <div>
          <label for="phone-number">Phone Number :</label>
          {{ form.phone_number|add_class:"px-5 form-control border rounded-lg py-2 px-3 w-full text-gray-700 leading-tight focus:outline-none focus:shadow-outline" }}
        </div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-5 px-5">
        <div>
          <label for="Address">Address :</label>
          {{ form.address|add_class:"px-5 form-control border rounded-lg py-2 px-3 w-full text-gray-700 leading-tight focus:outline-none focus:shadow-outline" }}
        </div>
        <div>
          <label for="city">City :</label>
          {{ form.city|add_class:"px-5 form-control border rounded-lg py-2 px-3 w-full text-gray-700 leading-tight focus:outline-none focus:shadow-outline" }}
        </div>
      </div>
      <div class="grid grid-cols-1 md:grid-cols-2 gap-5 mb-5 px-5">
        <div>
          <label for="state"> State :</label>
          {{ form.state|add_class:"px-5 form-control border rounded-lg py-2 px-3 w-full text-gray-700 leading-tight focus:outline-none focus:shadow-outline" }}
        </div>
      </div>
      <button type="submit"  class="w-full bg-gradient-to-r from-[#fbbf24] to-[#fb923c] py-1 font-bold text-lg hover:text-black hover:bg-gray-500 rounded-md text-white mb-4">Submit</button>
    
              </div>
            </div>
          </div>
        </div>
        <!-- Your Order Section -->
        <div class="lg:w-[50%] md:w-[50%]">
          <!-- Order title -->
          <div
            class="bg-[#fff] flex gap-x-1 items-center justify-center rounded-tl-lg font-bold text-red-500 text-center px-1 py-2 w-32"
          >
            <div>
              <svg
                class="w-5 h-5 text-red-500"
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
              >
                <path
                  d="M2.25 2.25a.75.75 0 0 0 0 1.5h1.386c.17 0 .318.114.362.278l2.558 9.592a3.752 3.752 0 0 0-2.806 3.63c0 .414.336.75.75.75h15.75a.75.75 0 0 0 0-1.5H5.378A2.25 2.25 0 0 1 7.5 15h11.218a.75.75 0 0 0 .674-.421 60.358 60.358 0 0 0 2.96-7.228.75.75 0 0 0-.525-.965A60.864 60.864 0 0 0 5.68 4.509l-.232-.867A1.875 1.875 0 0 0 3.636 2.25H2.25ZM3.75 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0ZM16.5 20.25a1.5 1.5 0 1 1 3 0 1.5 1.5 0 0 1-3 0Z"
                />
              </svg>
            </div>
            <div>
              <p>Your Order</p>
            </div>
          </div>
          <div class="w-full px-5 pb-5" style="background-color: #fff">
            <!-- order items -->
            {% for item in cart_item %}
            <div class="flex py-4">
              <div class="">
                <img
                  class="w-[80px] h-[80px]"
                  src="{{item.food_item.image.url}}"
                  alt=""
                />
              </div>
              <div class="ml-5 md:w-[50%] flex flex-col space-y-1 w-[50%]">
                <h2 class="font-bold text-lg tracking-wider">{{item.food_item|truncatechars:35}} </h2>
                <span class="text-gray-700">{{item.food_item.description}}</span>
                <a href="{% url 'vendor_detail' item.food_item.vendor.vendor_slug %}" ><span class=" bg-gradient-to-r from-[#fbbf24] visited:text-purple-900 " style='color:white;width: 150px;'>{{item.food_item.vendor}}</span></a>
              </div>
              <div class=" quantity flex gap-x-5 justify-end w-[30%]">
                  <span>{{item.quantity}} QTY</span>
                <p> <span class="price">$ {{item.food_item.price}}</span></p>
              </div>
            </div>
            {% endfor %}
            <!-- order Total -->
            <div>
              <div class="flex justify-between pt-3">
                
              </div>
              <div class="flex justify-between py-2 font-bold">
                <span>Total</span>
                 <span id='grand_total'>{{grand_total}}</span>
              </div>
            </div>
            <div class="mb-4">
              <h1 class="font-bold">Select Payment Method</h1>
                    <div class=" payment_method">
                        <label >
                            <input type="radio" name='payment_method' value='paypal'> 
                            <img src="{% static '/assets/images/PayPal.png' %}" alt="paypal" width='100'>
                        </label>
            </div>
            <div class='text-danger' id="paymet_method_erros"></div>
            <button onclick="return paymentMethod()"; type='submit'   class="w-full bg-gradient-to-r from-[#fbbf24] to-[#fb923c] py-1 font-bold text-lg hover:text-black hover:bg-gray-500 rounded-md text-white">Please Order</button>
    
          </div>
        </div>
        </form>
      </main>
    </div>
    <script>
    function paymentMethod(){
       var payment = $("input[name='payment_method']:checked").val();
       if (!payment){
        $('#paymet_method_erros').html('Please Select Your payment method');
        return false;
       }
       else{
        var confi = confirm("You have selected " + payment+ ' as your perferred payment method.\nclick "OK" to continue')
        if (confi == true){
            return true;
        }else{
            return false;
        }
       }
    }   
    $("input[name='payment_method']").on('change',function(){
        $('#paymet_method_erros').html('');
    })
</script>
{% endblock content %}